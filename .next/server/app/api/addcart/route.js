(()=>{var e={};e.id=89,e.ids=[89],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},5989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>O,routeModule:()=>x,serverHooks:()=>v,workAsyncStorage:()=>S,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{DELETE:()=>w,GET:()=>f,POST:()=>y,PUT:()=>g,getCartItems:()=>c,updateCart:()=>l});var n=r(2706),i=r(8203),a=r(5994),o=r(9021),u=r.n(o),d=r(3873);let p=r.n(d)().join(process.cwd(),"data","cart.json"),c=()=>{if(!u().existsSync(p))return[];let e=u().readFileSync(p,"utf-8");return e?JSON.parse(e):[]},l=e=>{u().writeFileSync(p,JSON.stringify(e,null,2))};async function f(){return new Response(JSON.stringify(c()),{status:200})}async function y(e){let{productId:t}=await e.json(),r=c(),s=r.find(e=>e.id===t.id);return s?s.quantity+=1:r.push({...t}),l(r),new Response(JSON.stringify({message:"Product added to cart"}),{status:201})}async function g(e){try{let{productId:t,action:r}=await e.json(),s=c(),n=s.find(e=>e.id===t);if(!n)return new Response(JSON.stringify({error:"Product not found"}),{status:404});if("increase"===r)n.quantity+=1;else{if("decrease"!==r)return new Response(JSON.stringify({error:"Invalid action"}),{status:400});n.quantity>1?n.quantity-=1:s=s.filter(e=>e.id!==t)}return l(s),new Response(JSON.stringify({message:"Cart updated",cart:s}),{status:200})}catch(e){return new Response(JSON.stringify({error:"Failed to update cart"}),{status:500})}}async function w(e){try{let{productId:t}=await e.json();if(!t)return new Response(JSON.stringify({error:"Invalid product ID"}),{status:400});let r=c();return r=r.filter(e=>e.id!==t),l(r),new Response(JSON.stringify({message:"Product removed from cart"}),{status:200})}catch(e){return new Response(JSON.stringify({error:"Failed to delete product"}),{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/addcart/route",pathname:"/api/addcart",filename:"route",bundlePath:"app/api/addcart/route"},resolvedPagePath:"C:\\Users\\WellDone\\Desktop\\programing\\Shop\\src\\app\\api\\addcart\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:S,workUnitAsyncStorage:m,serverHooks:v}=x;function O(){return(0,a.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{},2706:(e,t,r)=>{"use strict";e.exports=r(4870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994],()=>r(5989));module.exports=s})();