(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{5899:(t,e,a)=>{Promise.resolve().then(a.bind(a,1866))},1866:(t,e,a)=>{"use strict";a.d(e,{default:()=>u});var r=a(5155),i=a(3100),s=a(1531),o=a(6046),c=a(3391);a(5279);var l=a(2115),n=a(6670),d=a(5040);let u=()=>{(0,c.wA)();let t=(0,o.useRouter)(),{slug:e}=(0,o.useParams)(),[a,u]=(0,l.useState)(null),[h,y]=(0,l.useState)(!0),[p,f]=(0,l.useState)(1);return((0,l.useEffect)(()=>{(async function(){try{let a=await (0,d.oo)(e);a?u(a):t.push("/404")}catch(t){console.error("Error fetching product:",t)}finally{y(!1)}})()},[e]),h)?(0,r.jsx)("div",{className:"min-h-screen",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 flex justify-center items-center w-full h-full",children:(0,r.jsx)(n.A,{})})}):a?(0,r.jsx)("div",{className:"bg-black text-white flex justify-center items-center h-[80vh] mt-[150px]",children:(0,r.jsxs)("div",{className:"flex gap-16 max-w-5xl",children:[(0,r.jsx)("div",{children:(0,r.jsx)("a",{onClick:()=>t.push("/shop"),className:"text-gray-400 text-xl cursor-pointer hover:opacity-75",children:"< All Products"})}),(0,r.jsx)("img",{src:a.imageUrl,alt:"Product",className:"w-[530px] h-[530px] object-cover"}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:a.name}),(0,r.jsxs)("p",{className:"text-3xl text-gray-300",children:["$",a.price]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400 text-2xl mb-2",children:"Quantity"}),(0,r.jsx)("input",{type:"number",value:p,onChange:t=>f(Math.max(1,parseInt(t.target.value)||1)),className:"w-[140px] p-3 bg-[#181818] border border-gray-700 text-white text-left appearance-none"})]}),(0,r.jsx)("div",{onClick:handleAddToCart,children:(0,r.jsxs)(s.A,{disabled:h,className:"bg-[#484444] font-family-aktiv-grotesk hover:bg-gray-600 text-white py-3 px-6 text-lg flex items-center gap-2 ".concat(h?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)(i.A,{size:20})," ADD TO CART"]})})]})]})}):(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("h1",{className:"text-3xl",children:"Product not found"}),(0,r.jsx)("a",{onClick:()=>t.push("/shop"),className:"text-gray-400 text-xl cursor-pointer hover:opacity-75",children:"Go back to all products"})]})}},6670:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});var r=a(5155);a(2115);let i=()=>(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-screen",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Loading..."})]})},1531:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});var r=a(5155);function i(t){let{children:e,style:a,...i}=t;return(0,r.jsx)("button",{className:a,...i,children:e})}},5040:(t,e,a)=>{"use strict";a.d(e,{AS:()=>r,Jb:()=>l,Xl:()=>o,bE:()=>s,dt:()=>c,oo:()=>i});let r=async()=>{try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");return await t.json()}catch(t){throw console.error("Error fetching all products:",t),t}},i=async t=>{try{let e=await fetch("/api/products/".concat(t));if(!e.ok)throw Error("Error fetching product with id ".concat(t,": ").concat(e.status));return await e.json()}catch(t){throw console.error("Error fetching product:",t),t}},s=async t=>{try{let e=await fetch("/api/addcart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t})});if(!e.ok)throw Error("Failed to add product to cart");return await e.json()}catch(t){throw console.error("Error adding product to cart:",t),t}},o=async()=>{try{let t=await fetch("/api/addcart");if(!t.ok)throw Error("Failed to fetch cart");return await t.json()}catch(t){throw console.error("Error fetching cart:",t),t}},c=async t=>{try{let e=await fetch("/api/addcart",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t})});if(!e.ok){let t=await e.json();throw console.error("Error message:",t.error),Error(t.error||"Failed to remove product from cart")}return await e.json()}catch(t){throw console.error("Error removing product from cart:",t),t}},l=async(t,e)=>{try{let a=await fetch("/api/addcart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t,action:e})});if(!a.ok)throw Error("Failed to update product quantity in cart");return await a.json()}catch(t){throw console.error("Error updating product quantity:",t),t}}},5279:(t,e,a)=>{"use strict";a.d(e,{Ay:()=>h,Fy:()=>s,I1:()=>c,SW:()=>u,ro:()=>l,zG:()=>n});var r=a(8943),i=a(5040);let s=(0,r.zD)("cart/fetchCart",async()=>await (0,i.Xl)()),o=(0,r.zD)("cart/addItemToCart",async t=>(await (0,i.bE)(t),t)),c=(0,r.zD)("cart/removeItemFromCart",async t=>(await (0,i.dt)(t),t)),l=(0,r.zD)("cart/increaseItemQuantity",async t=>(await (0,i.Jb)(t,"increase"),t)),n=(0,r.zD)("cart/decreaseItemQuantity",async t=>(await (0,i.Jb)(t,"decrease"),t));(0,r.zD)("cart/updateItemQuantity",async t=>{let{id:e,quantity:a}=t;return await (0,i.Jb)(e,a),{id:e,quantity:a}});let d=(0,r.Z0)({name:"cart",initialState:{itemList:[],totalQuantity:0,showCart:!1,status:"idle",error:null},reducers:{setShowCart(t){t.showCart=!t.showCart}},extraReducers:t=>{t.addCase(s.pending,t=>{t.status="loading"}).addCase(s.fulfilled,(t,e)=>{t.status="succeeded",t.itemList=e.payload,t.totalQuantity=e.payload.reduce((t,e)=>t+e.quantity,0)}).addCase(s.rejected,(t,e)=>{t.status="failed",t.error=e.error.message}).addCase(o.fulfilled,(t,e)=>{let a=e.payload,r=t.itemList.find(t=>t.id===a.id);r?r.quantity+=a.quantity:t.itemList.push({...a,quantity:1}),t.totalQuantity+=a.quantity}).addCase(c.fulfilled,(t,e)=>{let a=e.payload;t.itemList=t.itemList.filter(t=>t.id!==a),t.totalQuantity=t.itemList.reduce((t,e)=>t+e.quantity,0)}).addCase(l.fulfilled,(t,e)=>{let a=e.payload,r=t.itemList.find(t=>t.id===a);r&&(r.quantity+=1,t.totalQuantity+=1)}).addCase(n.fulfilled,(t,e)=>{let a=e.payload,r=t.itemList.find(t=>t.id===a);r&&(r.quantity>1?(r.quantity-=1,t.totalQuantity-=1):(t.itemList=t.itemList.filter(t=>t.id!==a),t.totalQuantity=t.itemList.reduce((t,e)=>t+e.quantity,0)))})}}),{setShowCart:u}=d.actions,h=d.reducer}},t=>{var e=e=>t(t.s=e);t.O(0,[501,441,517,358],()=>e(5899)),_N_E=t.O()}]);